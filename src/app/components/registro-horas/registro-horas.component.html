<div class="container">
    <h2>Registro de Horas</h2>

    <!-- Barra de búsqueda por persona_id -->
    <div class="search-container">
        <input type="number" placeholder="Ingrese persona_id..." [(ngModel)]="personaId">
        <button (click)="buscarAsistencia()">Buscar</button>
    </div>

    <!-- Botones de Registro -->
    <div class="buttons-container">
        <button (click)="registrarEntrada()">Registrar Entrada</button>
        <button (click)="registrarSalida()">Registrar Salida</button>
    </div>

    <mat-toolbar color="primary">
        <span>Registro de Asistencia</span>
    </mat-toolbar>

    <mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

    <mat-card>
        <!-- Campo de búsqueda -->
        <mat-form-field>
            <mat-label>Búsqueda</mat-label>
            <input matInput (keyup)="applyFilter($event)" #input autocomplete="off">
        </mat-form-field>

        <!-- Tabla de asistencia -->
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z5" matSort>

            <!-- Definición de columnas -->
            <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="color: black; font-weight: bold;">Nombre</th>
                <td mat-cell *matCellDef="let element">{{ element.nombre }}</td>
            </ng-container>

            <ng-container matColumnDef="apellido">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="color: black; font-weight: bold;">Apellido</th>
                <td mat-cell *matCellDef="let element">{{ element.apellido }}</td>
            </ng-container>

            <ng-container matColumnDef="hora_entrada">
                <th mat-header-cell *matHeaderCellDef style="color: black; font-weight: bold;">Hora de Entrada</th>
                <td mat-cell *matCellDef="let element">{{ element.hora_entrada || '---' }}</td>
            </ng-container>

            <ng-container matColumnDef="hora_salida">
                <th mat-header-cell *matHeaderCellDef style="color: black; font-weight: bold;">Hora de Salida</th>
                <td mat-cell *matCellDef="let element">{{ element.hora_salida || '---' }}</td>
            </ng-container>

            <!-- Encabezado de la tabla -->
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

            <!-- Filas de la tabla -->
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <!-- Paginador -->
        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of asistencia"></mat-paginator>
    </mat-card>
</div>
